{{ define "pagination" }}
{{ $meta := .Meta }}
{{ $query := .Query }}
{{ $base := .Path }}

{{ if gt $meta.LastPage 1 }}
{{ $qs := "" }}
{{ range $key, $vals := $query }}
    {{ range $v := $vals }}
        {{ if ne $key "page" }}
            {{ $qs = printf "%s&%s=%s" $qs $key $v }}
        {{ end }}
    {{ end }}
{{ end }}

<nav aria-label="Pagination" class="mt-2">
    <ul class="pagination justify-content-center">

        <!-- Previous -->
        {{ if gt $meta.CurrentPage 1 }}
        <li class="page-item">
            <a class="page-link" href="{{ safeHTML (printf "%s?page=%d%s" $base (sub $meta.CurrentPage 1) $qs) }}">Previous</a>
        </li>
        {{ else }}
        <li class="page-item disabled"><span class="page-link">Previous</span></li>
        {{ end }}

        <!-- Pages -->
        {{ range $i := seq 1 $meta.LastPage $meta.CurrentPage }}
        {{ if eq $i -1 }}
        <li class="page-item disabled"><span class="page-link">...</span></li>
        {{ else }}
        <li class="page-item {{ if eq $meta.CurrentPage $i }}active{{ end }}">
            <a class="page-link" href="{{ safeHTML (printf "%s?page=%d%s" $base $i $qs) }}">{{ $i }}</a>
        </li>
        {{ end }}
        {{ end }}

        <!-- Next -->
        {{ if lt $meta.CurrentPage $meta.LastPage }}
        <li class="page-item">
            <a class="page-link" href="{{ safeHTML (printf "%s?page=%d%s" $base (add $meta.CurrentPage 1) $qs) }}">Next</a>
        </li>
        {{ else }}
        <li class="page-item disabled"><span class="page-link">Next</span></li>
        {{ end }}

    </ul>
</nav>
{{ end }}
{{ end }}
